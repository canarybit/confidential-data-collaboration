############ SUPPORTING THIRD PARTY ATTESTATION FOR INTEL SGX WITH INTEL DATA CENTER ATTESTATION PRIMITIVES ##############

The Intel SGX DCAP provides platform software, infrastructure tools, reference code, and online services to facilitate
third parties deploying and managing their own infrastructures. An Intel provided enclave called the Provisioning 
Certification Enclave (PCE), which acts as a local Certificate Authority for local Quoting Enclaves. In the beginning, the
Quoting Enclave(s) generate their own Attestation Key. Then the QE provides the PCE with the attestation public key. The
PCE authenticates and issues a certificate-like structure identifying the QE and the Attestation Key. The certificate is
signed by a device and TCB-specific signing key called the Provisioning Certificate Key (PCK). Finally, Intel publishes 
certificates and certificate revocation lists (CRLs) in all genuine Intel platforms. This results in a complete signature
chain from the Quotes to an Intel CA.

PCE uses two values to facilitate serving as a local CA. The first value is Provisioning Certificate Key (IETF RFC 6090)
and the second value is Platform Provisioning ID (PPID). In addition to the Intel's EPID-based Quoting Enclave, Intel will
release an open source Quoting Enclave that creates ECDSA-based Quotes that can be verified without the need for an Intel
managed attestation service. To verify Intel SGX attestation, the verifier starts from verifying the integrity of the 
signature chain from the Quote to the Intel-issued PCK certificate. Then make sure no keys in the chain have been revoked,
and the QE is from a suitable source and is up to date. Lastly, verify the status of Intel SGX TCB described in the chain,
and verify the enclave measurements in the Quote reflect an enclave identity expected.

As an example of attestation infrastructure for Data Center or Cloud Deployments is described here. The Quoting Enclave
retrieves the encrypted PPID from the PCE. A sofware agent delivers the PPID, CPUSVNs, and PCEID to a CSP-owned Inventory
Management Service (IMS). The encrypted PPID is provided to the IMS to enable the service to identify the platform when 
requesting PCK certificates from Intel. The IMS uses an Internet gateway to the Intel DCAP services and requests the PCK
certificates for each-CSP owned platform using the interface that retrieves both current and histroric certificates for
each platform. After generating the Attestation Key, the Quoting Enclave can specify this value when requesting the PCE to
certify the attestation public key. If a Quoting Enclave is updated, the QE can simply be upgraded and a new attestation
key can be generated and certified.